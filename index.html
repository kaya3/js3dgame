<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<script src="build/game.js"></script>
<style type="text/css">
#canvas {
	position: fixed;
	top: 0; left: 0; /* width: 100%; height: 100%; */
}
</style>
</head>
<body>
<canvas id="canvas"></canvas>
<script type="text/javascript">
let canvas = document.getElementById('canvas');
let game = main(canvas);

let data ={
    "faces": [
        { "label": "A", "coords": [{"x":0, "y":0, "z":0}, {"x":0, "y":0, "z":7}, {"x":6, "y":0, "z":7}, {"x":6, "y":0, "z":0}]},
        { "label": "B", "coords": [{"x":6, "y":0, "z":0}, {"x":6, "y":0, "z":7},{"x":6, "y":10, "z":7},{"x":6, "y":10, "z":0}]},
        { "label": "C", "coords": [{"x":0, "y":10, "z":0}, {"x":0, "y":0, "z":0}, {"x":6, "y":0, "z":0}, {"x":6, "y":10, "z":0}]},
        { "label": "D", "coords": [{"x":0, "y":10, "z":0}, {"x":0, "y":0, "z":0}, {"x":0, "y":0, "z":7}, {"x":0, "y":10, "z":7}]},
        { "label": "E", "coords": [{"x":0, "y":10, "z":7}, {"x":0, "y":0, "z":7}, {"x":6, "y":0, "z":7}, {"x":6, "y":10, "z":7}]},
        { "label": "F", "coords": [{"x":0, "y":10, "z":0}, {"x":0, "y":10, "z":7}, {"x":6, "y":10, "z":7}, {"x":6, "y":10, "z":0}]},
        { "label": "G", "coords": [{"x":2, "y":17, "z":0}, {"x":2, "y":10, "z":0}, {"x":2, "y":10, "z":7}, {"x":4, "y":15, "z":7}]},
        { "label": "H", "coords": [{"x":2, "y":17, "z":7}, {"x":2, "y":10, "z":7}, {"x":4, "y":10, "z":7}, {"x":4, "y":15, "z":7}]},
        { "label": "P", "coords": [{"x":4, "y":15, "z":0}, {"x":4, "y":10, "z":0}, {"x":4, "y":10, "z":7}, {"x":4, "y":15, "z":7}]},
        { "label": "Q", "coords": [{"x":2, "y":17, "z":0}, {"x":2, "y":10, "z":0}, {"x":4, "y":10, "z":0}, {"x":4, "y":15, "z":0}]},
        { "label": "I", "coords": [{"x":-4, "y":17, "z":0}, {"x":-4, "y":17, "z":7}, {"x":2, "y":17, "z":7}, {"x":2, "y":17, "z":0}]},
        { "label": "J", "coords": [{"x":-4, "y":23, "z":0}, {"x":-4, "y":23, "z":7}, {"x":-4, "y":17, "z":7}, {"x":-4, "y":17, "z":0}]},
        { "label": "K", "coords": [{"x":-4, "y":23, "z":0}, {"x":-4, "y":23, "z":7}, {"x":6, "y":23, "z":7}, {"x":6, "y":23, "z":0}]},
        { "label": "L", "coords": [{"x":6, "y":15, "z":0}, {"x":6, "y":15, "z":7}, {"x":6, "y":23, "z":7}, {"x":6, "y":23, "z":0}]},
        { "label": "M", "coords": [{"x":4, "y":15, "z":0}, {"x":4, "y":15, "z":7}, {"x":6, "y":15, "z":7}, {"x":6, "y":15, "z":0}]},
        { "label": "N", "coords": [{"x":-4, "y":17, "z":0}, {"x":2, "y":17, "z":0}, {"x":2, "y":15, "z":0}, {"x":6, "y":15, "z":0}, {"x":6, "y":23, "z":0}, {"x":-4, "y":23, "z":0}]},
        { "label": "O", "coords": [{"x":2, "y":10, "z":0}, {"x":4, "y":10, "z":0},{"x":4, "y":15, "z":0},{"x":2, "y":15, "z":0}]}
    ]
};


let polys = data.faces.map(faceJson => {
    console.info('faceJson.coords', faceJson.coords);

    let vecArray = faceJson.coords.map(coord => { return new Vector3(coord.x, coord.y, coord.z);});
    console.info('vecArray', vecArray);

    return new Polygon3(vecArray);
});

game.drawScene(polys);


window.addEventListener('resize', resizeCanvas);
window.addEventListener('keydown', moveCamera);

resizeCanvas();

function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}

function moveCamera(event) {
    const stepSize = 5;
    const key = event.key;
    switch (key) {
        case "ArrowLeft":
            game.moveCamera(-stepSize, 0);
            break;
        case "ArrowRight":
            game.moveCamera(+stepSize, 0);
            break;
        case "ArrowUp":
            game.moveCamera(0, -stepSize);
            break;
        case "ArrowDown":
            game.moveCamera(0, +stepSize);
            break;
    }
}


</script>
</body>
</html>
